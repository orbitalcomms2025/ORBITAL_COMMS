<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåç Alertas Globales en Tiempo Real</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  color: white;
}
header {
  background: rgba(0,0,0,0.7);
  padding: 1rem;
  text-align: center;
}
header h1 { margin:0; font-size:2rem; color:#ffcc00; }
main {
  padding: 1rem;
  display: grid;
  grid-template-columns: repeat(auto-fill,minmax(320px,1fr));
  gap: 1rem;
}
.card {
  background: rgba(255,255,255,0.1);
  border-radius: 12px;
  padding: 1rem;
  box-shadow:0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.2s ease-in-out;
}
.card:hover { transform: scale(1.02); }
h3 { margin-top:0; color:#00eaff; }
small { color:#ccc; }
</style>
</head>
<body>
<header>
  <h1>üåç Alertas Globales en Tiempo Real</h1>
  <p>Terremotos, incendios y desastres naturales</p>
</header>

<main id="alerts-container">
  <p>Cargando alertas...</p>
</main>

<script>
// Contenedor principal
const contenedor = document.getElementById("alerts-container");

// üîπ Funci√≥n para cargar terremotos USGS
async function cargarTerremotos() {
  try {
    const res = await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson");
    const data = await res.json();
    return data.features.map(ev => ({
      tipo: "Terremoto",
      lugar: ev.properties.place,
      magnitud: ev.properties.mag,
      tiempo: new Date(ev.properties.time).toLocaleString(),
      url: ev.properties.url
    }));
  } catch(e) { console.error(e); return []; }
}

// üîπ Funci√≥n para incendios NASA FIRMS (MODIS, √∫ltimo 24h)
async function cargarIncendios() {
  try {
    const res = await fetch("https://firms.modaps.eosdis.nasa.gov/mapserver/wfs?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typeNames=fires_modis_24h&outputFormat=application/json");
    const data = await res.json();
    return data.features.map(ev => ({
      tipo: "Incendio",
      lugar: `${ev.properties.latitude.toFixed(2)}, ${ev.properties.longitude.toFixed(2)}`,
      intensidad: ev.properties.brightness,
      tiempo: new Date(ev.properties.acq_date + "T" + ev.properties.acq_time).toLocaleString()
    }));
  } catch(e) { console.error(e); return []; }
}

// üîπ Funci√≥n para desastres GDACS (XML)
async function cargarGDACS() {
  try {
    const res = await fetch("https://www.gdacs.org/xml/rss.xml");
    const text = await res.text();
    const parser = new DOMParser();
    const xml = parser.parseFromString(text,"application/xml");
    const items = xml.querySelectorAll("item");
    const eventos = [];
    items.forEach(item => {
      eventos.push({
        tipo: item.querySelector("category")?.textContent || "Desastre",
        lugar: item.querySelector("title")?.textContent || "",
        tiempo: item.querySelector("pubDate")?.textContent || "",
        link: item.querySelector("link")?.textContent || ""
      });
    });
    return eventos;
  } catch(e){ console.error(e); return []; }
}

// üîπ Funci√≥n principal
async function cargarAlertasGlobales() {
  contenedor.innerHTML = "<p>Cargando alertas...</p>";
  const terremotos = await cargarTerremotos();
  const incendios = await cargarIncendios();
  const gdacs = await cargarGDACS();

  const todos = [...terremotos, ...incendios, ...gdacs];

  if(todos.length===0){
    contenedor.innerHTML="<p>‚úÖ No hay alertas activas en este momento</p>";
    return;
  }

  contenedor.innerHTML="";
  todos.forEach(ev => {
    const card = document.createElement("div");
    card.className="card";
    card.innerHTML = `<h3>${ev.tipo}</h3>
                      <p><strong>Lugar:</strong> ${ev.lugar}</p>
                      ${ev.magnitud ? `<p><strong>Magnitud:</strong> ${ev.magnitud}</p>` : ""}
                      ${ev.intensidad ? `<p><strong>Intensidad:</strong> ${ev.intensidad}</p>` : ""}
                      <p><small>‚è∞ ${ev.tiempo}</small></p>
                      ${ev.url || ev.link ? `<p><a href="${ev.url||ev.link}" target="_blank" style="color:#ffcc00;">Ver m√°s</a></p>` : ""}
                      `;
    contenedor.appendChild(card);
  });
}

// Cargar al inicio + cada 10 minutos
cargarAlertasGlobales();
setInterval(cargarAlertasGlobales,600000);

</script>
</body>
</html>