<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="NASA Climate Analysis System - Professional disaster prevention and route planning using real-time NASA satellite data">
  <meta name="keywords" content="NASA, climate analysis, disaster prevention, safe routes, construction analysis">
  <meta name="author" content="NASA Climate Analysis Team">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>NASA Climate Analysis System - Disaster Prevention & Route Planning</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ∞Ô∏è</text></svg>">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
        crossorigin="anonymous" />
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="../css/rutas.css">
  
  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
</head>
<body>

  <!-- Main Application Container -->
  <div id="app">
    
    <!-- ===== LEFT SIDEBAR - CONTROL PANEL ===== -->
    <aside class="sidebar" role="complementary" aria-label="Control Panel">
      
      <!-- Header Section -->
      <header class="header">
        <h1>NASA Climate Analysis</h1>
        <p>Disaster Prevention Through Real Satellite Data</p>
      </header>

      <!-- Control Panel Content -->
      <div class="control-panel">
        
        <!-- Location Search Section -->
        <section class="control-section">
          <h3>
            <span class="section-icon" aria-hidden="true">üìç</span>
            Location Search
          </h3>
          
          <div class="search-container">
            <input 
              type="text" 
              id="searchInput" 
              placeholder="City name or coordinates (-5.2, -80.6)" 
              aria-label="Search for location"
              autocomplete="off"
            />
            <div id="searchResults" role="listbox" aria-label="Search results"></div>
          </div>
          
          <p class="helper-text">
            Enter a city name or coordinates in format: latitude, longitude
          </p>
        </section>

        <!-- Date Range Section -->
        <section class="control-section">
          <h3>
            <span class="section-icon" aria-hidden="true">üìÖ</span>
            Analysis Period
          </h3>
          
          <div class="date-inputs">
            <div class="date-group">
              <label for="dateStart">Start Date</label>
              <input 
                type="date" 
                id="dateStart" 
                aria-label="Analysis start date"
                required
              />
            </div>
            
            <div class="date-group">
              <label for="dateEnd">End Date</label>
              <input 
                type="date" 
                id="dateEnd" 
                aria-label="Analysis end date"
                required
              />
            </div>
          </div>
          
          <p class="helper-text">
            Select date range for climate data analysis (recommended: 3-30 days)
          </p>
        </section>

        <!-- Analysis Mode Section -->
        <section class="control-section">
          <h3>
            <span class="section-icon" aria-hidden="true">üîç</span>
            Analysis Mode
          </h3>
          
          <div class="mode-selector" role="radiogroup" aria-label="Select analysis mode">
            
            <div class="radio-option">
              <input 
                type="radio" 
                id="modeRoute" 
                name="analysisMode" 
                value="route" 
                checked
                aria-describedby="route-description"
              />
              <label for="modeRoute">
                <span class="mode-icon" aria-hidden="true">üõ£Ô∏è</span>
                <span class="mode-details">
                  <strong>Safe Route Analysis</strong>
                  <small id="route-description">Evaluate travel safety and evacuation routes</small>
                </span>
              </label>
            </div>
            
            <div class="radio-option">
              <input 
                type="radio" 
                id="modeConstruction" 
                name="analysisMode" 
                value="construction"
                aria-describedby="construction-description"
              />
              <label for="modeConstruction">
                <span class="mode-icon" aria-hidden="true">üèóÔ∏è</span>
                <span class="mode-details">
                  <strong>Construction Site Analysis</strong>
                  <small id="construction-description">Assess site viability for building projects</small>
                </span>
              </label>
            </div>
            
          </div>
        </section>

        <!-- Process Button -->
        <section class="control-section">
          <button 
            id="btnProcess" 
            class="btn-primary" 
            type="button"
            aria-label="Start analysis process"
          >
            <span class="btn-icon" aria-hidden="true">üöÄ</span>
            Process Analysis
          </button>
        </section>

        <!-- Map Controls Section -->
        <section class="control-section">
          <h3>
            <span class="section-icon" aria-hidden="true">üó∫Ô∏è</span>
            Map Display
          </h3>
          
          <button 
            id="btnCities" 
            class="btn-secondary" 
            type="button"
            aria-label="Toggle city labels on map"
            aria-pressed="false"
          >
            <span class="btn-icon" aria-hidden="true">üèôÔ∏è</span>
            Toggle City Labels
          </button>
        </section>

        <!-- Quick Info -->
        <section class="control-section info-section">
          <div class="info-badge">
            <span class="badge-icon" aria-hidden="true">‚ÑπÔ∏è</span>
            <div class="badge-content">
              <strong>Data Sources:</strong>
              <small>NASA POWER, NASA EONET, Open-Elevation</small>
            </div>
          </div>
        </section>

      </div>
    </aside>

    <!-- ===== MAP CONTAINER ===== -->
    <main class="map-container" role="main">
      
      <!-- Leaflet Map -->
      <div 
        id="map" 
        role="application" 
        aria-label="Interactive climate analysis map"
      ></div>

      <!-- Coordinates Display -->
      <div 
        id="coords" 
        role="status" 
        aria-live="polite"
        aria-atomic="true"
      >
        Hover over map to see coordinates
      </div>

      <!-- Map Legend (dynamically inserted by JS) -->
      
    </main>

    <!-- ===== RESULTS PANEL ===== -->
    <aside 
      id="resultPanel" 
      class="results-panel" 
      role="complementary" 
      aria-label="Analysis Results"
      aria-hidden="true"
    >
      
      <!-- Panel Header -->
      <div class="panel-header">
        <h2>Analysis Results</h2>
        <div class="panel-controls">
          <button 
            id="minResults" 
            class="panel-btn" 
            type="button"
            aria-label="Minimize results panel"
            title="Minimize"
          >
            ‚àí
          </button>
          <button 
            id="closeResults" 
            class="panel-btn" 
            type="button"
            aria-label="Close results panel"
            title="Close"
          >
            √ó
          </button>
        </div>
      </div>

      <!-- Panel Content -->
      <div 
        id="resultsContent" 
        class="panel-content"
        role="region"
        aria-label="Analysis results content"
      >
        <!-- Empty State -->
        <div class="empty-state">
          <div class="empty-icon" aria-hidden="true">üìä</div>
          <h3>No Analysis Yet</h3>
          <p>Select a location and date range, then click "Process Analysis" to view detailed climate data and recommendations.</p>
          <div class="empty-steps">
            <div class="empty-step">
              <span class="step-number">1</span>
              <span>Search location</span>
            </div>
            <div class="empty-step">
              <span class="step-number">2</span>
              <span>Choose dates</span>
            </div>
            <div class="empty-step">
              <span class="step-number">3</span>
              <span>Select mode</span>
            </div>
            <div class="empty-step">
              <span class="step-number">4</span>
              <span>Process</span>
            </div>
          </div>
        </div>
        
        <!-- Results will be dynamically inserted here by JavaScript -->
      </div>
      
    </aside>

  </div>

  <!-- ===== TOAST CONTAINER (dynamically created by JS) ===== -->
  <!-- Toast notifications will appear here -->

  <!-- ===== TUTORIAL OVERLAY (dynamically created by JS) ===== -->
  <!-- Tutorial will be shown on first visit -->

  <!-- ===== SCRIPTS ===== -->
  
  <!-- Leaflet JS -->
  <script 
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
    crossorigin="anonymous"
  ></script>
  
  <!-- jsPDF for PDF generation -->
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"
    integrity="sha512-qZvrmS2ekKPF2mSznTQsxqPgnpkI4DNTlrdUmTzrDgektczlKNRRhy5X5AAOnx5S09ydFYWWNSfcEqDTTHgtNA=="
    crossorigin="anonymous"
  ></script>
  
  <!-- Main Application Script -->
  <script src="../js/rutas.js"></script>

  <!-- Accessibility Announcements -->
  <div id="a11y-announcer" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>

</body>
</html>

